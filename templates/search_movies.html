{% extends "base.html" %}

{% block title %}Search Results - {{ query }}{% endblock %}

{% block content %}
<div class="search-section">
    <!-- Page heading -->
    <h1>Search Results for "{{ query }}"</h1>
    
    <!-- Back link -->
    <a href="{{ url_for('user_movies', user_id=user.id) }}" class="btn btn-secondary">
        ‚Üê Back to {{ user.name }}'s Movies
    </a>
    
    <!-- Search results -->
    <div class="search-results">
        {% if movies %}
            <p class="results-count">Found {{ movies|length }} movie(s). Click on a movie to add it to your collection.</p>
            
            <!-- Movie selection grid -->
            <div class="search-grid">
                {% for movie in movies %}
                    <a href="{{ url_for('add_movie_by_id', user_id=user.id, imdb_id=movie.imdb_id) }}" 
                       class="search-card">
                        <!-- Movie poster -->
                        {% if movie.poster %}
                            <img src="{{ movie.poster }}" 
                                 alt="{{ movie.title }} poster" 
                                 class="search-poster">
                        {% else %}
                            <div class="search-no-poster">
                                <span>üé¨</span>
                                <p>No Poster</p>
                            </div>
                        {% endif %}
                        
                        <!-- Movie info -->
                        <div class="search-info">
                            <h3>{{ movie.title }}</h3>
                            <p>{{ movie.year }}</p>
                        </div>
                        
                        <!-- Add indicator on hover -->
                        <div class="add-overlay">
                            <span class="add-icon">+</span>
                            <p>Add to Collection</p>
                        </div>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <!-- No results message -->
            <div class="no-results">
                <p>No movies found for "{{ query }}".</p>
                <p>Try searching with different keywords.</p>
            </div>
        {% endif %}
    </div>
    
    <!-- New search form -->
    <div class="new-search">
        <h2>Search Again</h2>
        <form action="{{ url_for('search_movies', user_id=user.id) }}" method="get">
            <div class="form-group">
                <input type="text" 
                       name="q" 
                       placeholder="Enter movie title..." 
                       class="form-control"
                       value="{{ query }}"
                       required>
            </div>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
    </div>
</div>
{% endblock %}